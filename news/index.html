<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • etwfe</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">etwfe</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0.99</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/etwfe.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/grantmcdermott/etwfe/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/grantmcdermott/etwfe/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0.99" id="etwfe-05099-dev-version">etwfe 0.5.0.99 (dev version)<a class="anchor" aria-label="anchor" href="#etwfe-05099-dev-version"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-5-0-99">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-5-0-99"></a></h3>
<ul><li>The default behaviour of the <code>etwfe(..., fe = &lt;fe&gt;)</code> argument now hinges on the type of model family. For Gaussian models, we use the same <code>"vs"</code> (varying slopes) option as before. But for non-linear families like Poission, we now default to <code>"none"</code>. This is to preserve the correct VCOV behaviour of these models once they are passed to <code><a href="../reference/emfx.html">emfx()</a></code>, thus matching the new upstream logic of <strong>marginaleffects</strong>. (Briefly: the standard errors of these non-linear families cannot be computed correctly with derivative methods on estimations where the fixed-effects have been abstracted away; see <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1487" class="external-link">marginaleffects#1487)</a> for more details.) Technically this is a breaking change, but it requires no changes on the user side and the end result should be identical in most cases. The only change you might see is that the standard errors from estimations with non-linear families will be slightly different/corrected. (<a href="https://github.com/grantmcdermott/etwfe/issues/67" class="external-link">#67</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="internals-0-5-0-99">Internals<a class="anchor" aria-label="anchor" href="#internals-0-5-0-99"></a></h3>
<ul><li>Bump <strong>marginaleffects</strong> dependency to 0.29.0.</li>
<li>Bump <strong>tinyplot</strong> depencency to v0.4.2.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0" id="etwfe-050">etwfe 0.5.0<a class="anchor" aria-label="anchor" href="#etwfe-050"></a></h2><p class="text-muted">CRAN release: 2024-12-16</p>
<div class="section level3">
<h3 id="new-features-0-5-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-5-0"></a></h3>
<ul><li>New <code>emfx</code> arguments:
<ul><li>
<code>emfx(..., predict = c("response", "link"))</code>, where the latter allows for obtaining the linear prediction for non-linear models. Internally passed as <code>marginaleffects::slopes(..., type = predict)</code>, thus avoiding a clash with the topline <code>emfx(..., type = &lt;aggregration_type&gt;)</code> argument. (<a href="https://github.com/grantmcdermott/etwfe/issues/49" class="external-link">#49</a>)</li>
</ul></li>
<li>
<code>emfx(..., lean = &lt;logical&gt;)</code>. Default value is <code>FALSE</code>, but switching to <code>TRUE</code> will ensure a light return object that strips away data-heavy attributes (e.g., copies of the original model). These attributes are unlikely to be needed as part of the <code><a href="../reference/emfx.html">emfx()</a></code> workflow, so we may change the default to <code>lean = TRUE</code> in a future version of <strong>etwfe</strong>. (<a href="https://github.com/grantmcdermott/etwfe/issues/51" class="external-link">#51</a>, <a href="https://github.com/grantmcdermott/etwfe/issues/58" class="external-link">#58</a>)</li>
<li>Native <code><a href="../reference/plot.emfx.html">plot.emfx()</a></code> method (via a <strong>tinyplot</strong> backend) for visualizing <code>emfx</code> objects. (<a href="https://github.com/grantmcdermott/etwfe/issues/54" class="external-link">#54</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="superseded-arguments-0-5-0">Superseded arguments<a class="anchor" aria-label="anchor" href="#superseded-arguments-0-5-0"></a></h3>
<ul><li>The <code>collapse</code> argument in <code><a href="../reference/emfx.html">emfx()</a></code> is superseded by <code>compress</code>. The older argument is retained as an alias for backwards compatibility, but will now trigger a message, nudging users to switch to <code>compress</code> instead. The end result will be identical, though. This cosmetic change was motivated by a desire to be more consistent with the phrasing used in the literature (i.e., on performance-boosting within group compression and weighting). See Wong <em>et al.</em> (<a href="https://doi.org/10.48550/arXiv.2102.11297" class="external-link">2021</a>), for example. (<a href="https://github.com/grantmcdermott/etwfe/issues/57" class="external-link">#57</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-0-5-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-5-0"></a></h3>
<ul><li>Various documentation improvements, including the addition of a “never” treated control group example in the vignette and fixing some confusing typos (e.g., refering to wrong default arguments).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="etwfe-040">etwfe 0.4.0<a class="anchor" aria-label="anchor" href="#etwfe-040"></a></h2><p class="text-muted">CRAN release: 2024-02-27</p>
<div class="section level3">
<h3 id="bug-fixes-0-4-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-4-0"></a></h3>
<ul><li>Fix ATT calculation for the never-treated case (i..e, <code>cgroup = "never</code>) due to incorrect subsetting prior to recovering the marginal effects. Thanks to <a href="https://github.com/paulofelipe" class="external-link">@paulofelipe</a> for reporting (<a href="https://github.com/grantmcdermott/etwfe/issues/37" class="external-link">#37</a>).</li>
<li>Avoid (where possible) or error out if user supplies reserved “group” variable in formula (<a href="https://github.com/grantmcdermott/etwfe/issues/41" class="external-link">#41</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-0-4-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-4-0"></a></h3>
<ul><li>Fix missing autolinks in documentation due to markdown formatting (<a href="https://github.com/grantmcdermott/etwfe/issues/44" class="external-link">#44</a> <a href="https://github.com/etiennebacher" class="external-link">@etiennebacher</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.5" id="etwfe-035">etwfe 0.3.5<a class="anchor" aria-label="anchor" href="#etwfe-035"></a></h2><p class="text-muted">CRAN release: 2023-12-01</p>
<div class="section level3">
<h3 id="internal-0-3-5">Internal<a class="anchor" aria-label="anchor" href="#internal-0-3-5"></a></h3>
<ul><li>Update tests to match upstream changes to <strong>fixest</strong>.</li>
<li>Update maintainer email address.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.4" id="etwfe-034">etwfe 0.3.4<a class="anchor" aria-label="anchor" href="#etwfe-034"></a></h2><p class="text-muted">CRAN release: 2023-06-19</p>
<div class="section level3">
<h3 id="internal-0-3-4">Internal<a class="anchor" aria-label="anchor" href="#internal-0-3-4"></a></h3>
<ul><li>Update tests to match upstream changes to <strong>marginaleffects</strong> (<a href="https://github.com/grantmcdermott/etwfe/issues/36" class="external-link">#36</a> <a href="https://github.com/vincentarelbundock" class="external-link">@vincentarelbundock</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.3" id="etwfe-033">etwfe 0.3.3<a class="anchor" aria-label="anchor" href="#etwfe-033"></a></h2><p class="text-muted">CRAN release: 2023-05-27</p>
<div class="section level3">
<h3 id="internal-0-3-3">Internal<a class="anchor" aria-label="anchor" href="#internal-0-3-3"></a></h3>
<ul><li>Rejigged some internal tests following upstream changes to <strong>marginaleffects</strong> (<a href="https://github.com/grantmcdermott/etwfe/issues/35" class="external-link">#35</a> <a href="https://github.com/vincentarelbundock" class="external-link">@vincentarelbundock</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.2" id="etwfe-032">etwfe 0.3.2<a class="anchor" aria-label="anchor" href="#etwfe-032"></a></h2><p class="text-muted">CRAN release: 2023-05-02</p>
<div class="section level3">
<h3 id="bug-fixes-0-3-2">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-3-2"></a></h3>
<ul><li><p>Fixed internal centering procedure and handling of multiple covariate levels (<a href="https://github.com/grantmcdermott/etwfe/issues/30" class="external-link">#30</a>, <a href="https://github.com/grantmcdermott/etwfe/issues/31" class="external-link">#31</a>). These fixes should have no impact on the main ATT estimates (i.e., typical use of the package). But it may lead to differences in the heterogeneous ATTs—i.e., via the <code>xvar</code> arg—which were incorrectly estimated in some cases. Thanks to <a href="https://github.com/PhilipCarthy" class="external-link">@PhilipCarthy</a> for flagging and to <a href="https://github.com/frederickluser" class="external-link">@frederickluser</a> for helpful discussions</p></li>
<li><p>Fixed internal and upstream bug which was causing model offsets to error (<a href="https://github.com/grantmcdermott/etwfe/issues/28" class="external-link">#28</a>, thanks <a href="https://github.com/mariofiorini" class="external-link">@mariofiorini</a> for the initial report and several others for helpful discussion). Note that this fix requires <strong>insight</strong> &gt;= 0.19.1.8, which is the development version at the time of writing. More information available here: <a href="https://github.com/easystats/insight/pull/759" class="external-link uri">https://github.com/easystats/insight/pull/759</a></p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.1" id="etwfe-031">etwfe 0.3.1<a class="anchor" aria-label="anchor" href="#etwfe-031"></a></h2><p class="text-muted">CRAN release: 2023-02-28</p>
<div class="section level3">
<h3 id="internal-0-3-1">Internal<a class="anchor" aria-label="anchor" href="#internal-0-3-1"></a></h3>
<ul><li>Minor updates to internal code and some unit tests to match forthcoming updates to <strong>marginaleffects</strong> 0.10.0. The latter update also brings some notable performance improvements to <code><a href="../reference/emfx.html">emfx()</a></code>.</li>
</ul></div>
<div class="section level3">
<h3 id="other-0-3-1">Other<a class="anchor" aria-label="anchor" href="#other-0-3-1"></a></h3>
<ul><li>Some documentation improvements.</li>
<li>The Examples have been wrapped in <code>\dontrun</code> to avoid triggering CRAN NOTEs on Windows for exceeding 5 seconds execution time. Note that the package homepage still runs these Examples if users want to inspect the output online.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="etwfe-030">etwfe 0.3.0<a class="anchor" aria-label="anchor" href="#etwfe-030"></a></h2><p class="text-muted">CRAN release: 2023-02-08</p>
<div class="section level3">
<h3 id="new-features-and-enhancements-0-3-0">New features and enhancements<a class="anchor" aria-label="anchor" href="#new-features-and-enhancements-0-3-0"></a></h3>
<ul><li><p>Support for estimating heterogeneous treatment effects via the new <code>etwfe(..., xvar = &lt;xvar&gt;</code> argument (<a href="https://github.com/grantmcdermott/etwfe/issues/16" class="external-link">#16</a>, thanks to <a href="https://github.com/frederickluser" class="external-link">@frederickluser</a>). Automatically extends to <code><a href="../reference/emfx.html">emfx()</a></code> via the latter’s <code>by_xvar</code> argument (<a href="https://github.com/grantmcdermott/etwfe/issues/21" class="external-link">#21</a>). More details are provided in the dedicated “Heterogeneous treatment effects” section of the vignette and help documentation</p></li>
<li><p>The new <code>emfx(..., collapse = TRUE)</code> argument can substantially reduce estimation times for large datasets (<a href="https://github.com/grantmcdermott/etwfe/issues/19" class="external-link">#19</a>, thanks <a href="https://github.com/frederickluser" class="external-link">@frederickluser</a>). This performance boost does trade off against a loss in estimate accuracy. But testing suggests that the difference is relatively minor for typical use cases (i.e., results are equivalent up to the 1st or 2nd significant decimal place, and sometimes even better). Please let us know if you find edge cases where this is not true. More details are available in the dedicated “Performance tips” section of the vignette and help documentation, including advice for combining collapsing with <code>emfx(..., vcov = FALSE)</code> (which yields an even more dramatic speed boost but at a cost of not reporting any standard errors).</p></li>
<li><p>Users can now use a 1 on the fml RHS to indicate that there are no control variables as part of the <code>etwfe</code> call, e.g. <code>etwfe(y ~ 1, ...)</code>. This provides a second way of indicating no controls, alongside the existing 0 option, e.g. <code>etwfe(y ~ 0, ...)</code></p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-3-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-3-0"></a></h3>
<ul><li>Internal code and tests have been updated to account for some upstream breaking changes in <strong>marginaleffects</strong> 0.9.0 (<a href="https://github.com/grantmcdermott/etwfe/issues/20" class="external-link">#20</a>, thanks <a href="https://github.com/vincentarelbundock" class="external-link">@vincentarelbundock</a>). From the user side, the most notable changes are that we no longer have to call <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> on <code>emfx</code> objects for pretty printing, and that the (former) “dydx” column of the resulting object is now named “estimate”. These changes are reflected in the updated documentation.</li>
</ul></div>
<div class="section level3">
<h3 id="other-0-3-0">Other<a class="anchor" aria-label="anchor" href="#other-0-3-0"></a></h3>
<ul><li><p>Various documentation improvements. For example, the aforementioned sections on Heterogeneous TEs and Performance tips. I have also removed some warnings about the use of time-varying controls (<a href="https://github.com/grantmcdermott/etwfe/issues/17" class="external-link">#17</a>). In truth, I can’t quite recall why I included these warnings in the first place and testing confirms that it does not appear to pose a problem for the ETWFE framework. Thanks to Felix Pretis for prompting me to revisit this implicit restriction, including forwarding some relevant correspondence with Prof. Wooldridge.</p></li>
<li><p><strong>data.table</strong> is added to Imports and thus becomes a direct dependency. It was already an indirect dependency through <strong>marginaleffects</strong>.</p></li>
<li><p>It’s now possible to install the development version of the package from R-universe. Details are provided in the README.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="etwfe-020">etwfe 0.2.0<a class="anchor" aria-label="anchor" href="#etwfe-020"></a></h2><p class="text-muted">CRAN release: 2023-01-11</p>
<div class="section level3">
<h3 id="bug-fixes-and-breaking-changes-0-2-0">Bug fixes and breaking changes<a class="anchor" aria-label="anchor" href="#bug-fixes-and-breaking-changes-0-2-0"></a></h3>
<ul><li><p>The <code>.Dtreat</code> indicator variable created during the <code>etwfe</code> call is now logical instead of integer (<a href="https://github.com/grantmcdermott/etwfe/issues/14" class="external-link">#14</a>). This fix yields slightly different effect sizes for <code>emfx</code> output when applied to non-linear model families (e.g., <code>etwfe(..., family = "poisson")</code>. The reason is that we are now implicitly calling <code><a href="https://marginaleffects.com/man/r/comparisons.html" class="external-link">marginaleffects::comparisons</a></code> under the hood rather than <code>marginaleffects::marginaleffects</code>. Note that the main <code>etwfe</code> coefficients (for any family) are unaffected, and the same is also true for <code>emfx</code> when applied to a linear model (i.e., the default).</p></li>
<li><p>The (optional) <code>ivar</code> argument of <code><a href="../reference/etwfe.html">etwfe()</a></code> has been moved down the argument order list from second position to fifth (i.e., after the <code>data</code> argument). This means that the four required arguments of function now occupy the top positions, which could enable shorter, unnamed notation like <code>etwfe(y ~ x, year, cohort, dat)</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-and-enhancements-0-2-0">New features and enhancements<a class="anchor" aria-label="anchor" href="#new-features-and-enhancements-0-2-0"></a></h3>
<ul><li><p><code>emfx</code> now allows (time-invariant) interacted control variables on the fml RHS.</p></li>
<li><p><code>emfx</code> now has a <code>post_only</code> logical argument, which may be useful for plotting aesthetics (but not inference). See the example in the introductory vignette.</p></li>
<li><p>Various improvements to the documentation (restructuring, fixed typos, etc.)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="etwfe-010">etwfe 0.1.0<a class="anchor" aria-label="anchor" href="#etwfe-010"></a></h2><p class="text-muted">CRAN release: 2022-12-14</p>
<ul><li>Initial release.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Grant McDermott.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

